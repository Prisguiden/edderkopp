{"version":3,"sources":["../src/config.js"],"names":[],"mappings":"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","file":"config.js","sourcesContent":["/**\n * Also can use:\n * https://github.com/lorenwest/node-config\n */\n\nimport fs from 'fs';\nimport u from 'url';\n\nexport default { get, dir };\n\nlet _dir = process.env.NODE_CONFIG_DIR || process.cwd() + '/config';\nlet _files; // cache\n\nfunction dir(dir) {\n    _dir = dir;\n}\n\nfunction get(arg) {\n    if (Number.isInteger(arg)) { // support id in filename (ex: configfile-<id>.js)\n        return _getById(arg);\n    } else if (arg.indexOf('http') !== -1) { // support url (will look for the url property in all config files)\n        return _getByUrl(arg);\n    } else if (arg.indexOf('/') !== -1) { // support full path of file (ex: /home/user/config.js)\n        return _parse(arg);\n    } else { // support recursive search for config file in dir. return first found (ex: configfile.js)\n        return _getByFile(arg);\n    }\n}\n\nfunction _getById(id) {\n    _files = _files || _getFiles(_dir);\n    for (let file of _files) {\n        let match = file.match(/-(\\d+)\\./);\n        if (match && match[1] == id) {\n            return _parse(file);\n        }\n    }\n    return false;\n}\n\nfunction _getByUrl(url) {\n    _files = _files || _getFiles(_dir);\n    let hostname = u.parse(url).hostname;\n    for (let file of _files) {\n        let config = _parse(file);\n        if (config.url && config.url.entry && hostname == u.parse(config.url.entry).hostname) {\n            return config;\n        }\n    }\n    return false;\n}\n\nfunction _getByFile(f) {\n    _files = _files || _getFiles(_dir);\n    for (let file of _files) {\n        if (file.indexOf(f) > -1) {\n            return _parse(file);\n        }\n    }\n    return false;\n}\n\n// Recursivly find all files\nfunction _getFiles(dir) {\n    var files = [];\n    for (let file of fs.readdirSync(dir)) {\n        if (fs.statSync(dir + '/' + file).isDirectory()) {\n            files = files.concat(_getFiles(dir + '/' + file));\n        } else {\n            files.push(dir + '/' + file);\n        }\n    };\n    return files;\n}\n\nfunction _parse(file) {\n    var match = file.match(/.*\\.([^.]*)$/);\n    if (match[1] == 'json') {\n        return JSON.parse(fs.readFileSync(file).toString());\n    } else if (match[1] == 'js') {\n        return require(file);\n    }\n}\n"]}