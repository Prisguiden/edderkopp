{"version":3,"sources":["../src/cache.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;IAEqB,K;AAIjB,mBAAY,IAAZ,EAAkB;AAAA;;AACd,YAAI,IAAJ,EAAU;AACN,iBAAK,KAAL,GAAa,IAAb;AACH;AACJ;;;;4BAEG,G,EAAK;AACL,iBAAK,KAAL;AACA,mBAAO,CAAC,CAAC,KAAK,MAAL,CAAY,GAAZ,CAAT;AACH;;;4BAEG,G,EAAK;AACL,iBAAK,KAAL;AACA,mBAAO,KAAK,MAAL,CAAY,GAAZ,CAAP;AACH;;;4BAEG,G,EAAK,K,EAAO;AACZ,iBAAK,KAAL;AACA,iBAAK,MAAL,CAAY,GAAZ,IAAmB,KAAnB;AACH;;;gCAEO;AACJ,gBAAI,KAAK,KAAT,EAAgB;AACZ,6BAAG,aAAH,CAAiB,KAAK,KAAtB,EAA6B,yBAAe,KAAK,MAApB,CAA7B;AACH;AACJ;;;+BAEM;AACH,iBAAK,KAAL;AACA,mBAAO,oBAAY,KAAK,MAAjB,CAAP;AACH;;;+BAEM,G,EAAK;AACR,iBAAK,KAAL;AACA,gBAAI,KAAK,MAAL,CAAY,GAAZ,MAAqB,SAAzB,EAAoC;AAChC,uBAAO,KAAK,MAAL,CAAY,GAAZ,CAAP;AACH;AACJ;;;gCAEO;AACJ,gBAAI,KAAK,MAAL,KAAgB,SAApB,EAA+B;AAC3B,oBAAI,KAAK,KAAT,EAAgB;AACZ,wBAAI;AACA,4BAAM,IAAI,aAAG,YAAH,CAAgB,KAAK,KAArB,CAAV;AACA,6BAAK,MAAL,GAAc,KAAK,KAAL,CAAW,EAAE,QAAF,EAAX,CAAd;AACH,qBAHD,CAGE,OAAO,GAAP,EAAY;AACV,6BAAK,MAAL,GAAc,EAAd;AACH;AACJ,iBAPD,MAOO;AACH,yBAAK,MAAL,GAAc,EAAd;AACH;AACJ;AACJ;;;;;kBAxDgB,K","file":"cache.js","sourcesContent":["import fs from 'fs';\n\nexport default class Cache {\n\n    _cache;\n\n    constructor(file) {\n        if (file) {\n            this._file = file;\n        }\n    }\n\n    has(url) {\n        this._init();\n        return !!this._cache[url];\n    }\n\n    get(url) {\n        this._init();\n        return this._cache[url];\n    }\n\n    set(url, value) {\n        this._init();\n        this._cache[url] = value;\n    }\n\n    write() {\n        if (this._file) {\n            fs.writeFileSync(this._file, JSON.stringify(this._cache));\n        }\n    }\n\n    keys() {\n        this._init();\n        return Object.keys(this._cache);\n    }\n\n    remove(url) {\n        this._init();\n        if (this._cache[url] !== undefined) {\n            delete this._cache[url];\n        }\n    }\n\n    _init() {\n        if (this._cache === undefined) {\n            if (this._file) {\n                try {\n                    const f = fs.readFileSync(this._file);\n                    this._cache = JSON.parse(f.toString());\n                } catch (err) {\n                    this._cache = {};\n                }\n            } else {\n                this._cache = {};\n            }\n        }\n    }\n}\n"]}