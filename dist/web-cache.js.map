{"version":3,"sources":["../src/web-cache.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;;;IAEqB,Q;AAEjB,sBAAY,IAAZ,EAAkB;AAAA;;AACd,aAAK,KAAL,GAAa,QAAQ,QAAQ,GAAR,CAAY,eAApB,IAAuC,QAAQ,GAAR,KAAgB,iBAApE;AACH;;;;4BAMG,G,EAAK;AACL,iBAAK,KAAL;AACA,mBAAO,CAAC,CAAC,KAAK,MAAL,CAAY,GAAZ,CAAT;AACH;;;4BAEG,G,EAAK;AACL,iBAAK,KAAL;AACA,mBAAO,KAAK,MAAL,CAAY,GAAZ,MAAqB,SAArB,GAAiC,KAAK,MAAL,CAAY,GAAZ,CAAjC,GAAoD,KAA3D;AACH;;;4BAEG,G,EAAK,K,EAAO;AACZ,iBAAK,KAAL;AACA,iBAAK,MAAL,CAAY,GAAZ,IAAmB,KAAnB;AACA,yBAAG,aAAH,CAAiB,KAAK,KAAtB,EAA6B,yBAAe,KAAK,MAApB,CAA7B;AACH;;;+BAEM,G,EAAK;AACR,iBAAK,KAAL;AACA,gBAAI,KAAK,MAAL,CAAY,GAAZ,MAAqB,SAAzB,EAAoC;AAChC,uBAAO,KAAK,MAAL,CAAY,GAAZ,CAAP;AACA,6BAAG,aAAH,CAAiB,KAAK,KAAtB,EAA6B,yBAAe,KAAK,MAApB,CAA7B;AACH;AACJ;;;gCAEO;AACJ,gBAAI,KAAK,MAAL,KAAgB,SAApB,EAA+B;AAC3B,oBAAI;AACA,wBAAM,IAAI,aAAG,YAAH,CAAgB,KAAK,KAArB,CAAV;AACA,yBAAK,MAAL,GAAc,KAAK,KAAL,CAAW,EAAE,QAAF,EAAX,CAAd;AACH,iBAHD,CAGE,OAAO,GAAP,EAAY;AACV,yBAAK,MAAL,GAAc,EAAd;AACH;AACJ;AACJ;;;0BArCQ,I,EAAM;AACX,iBAAK,KAAL,GAAa,IAAb;AACH;;;;;kBARgB,Q","file":"web-cache.js","sourcesContent":["import fs from 'fs';\n\nexport default class WebCache {\n\n    constructor(file) {\n        this._file = file || process.env.NODE_CONFIG_DIR || process.cwd() + '/web-cache.json';\n    }\n\n    set file(file) {\n        this._file = file;\n    }\n\n    has(url) {\n        this._init();\n        return !!this._cache[url];\n    }\n\n    get(url) {\n        this._init();\n        return this._cache[url] !== undefined ? this._cache[url] : false;\n    }\n\n    set(url, value) {\n        this._init();\n        this._cache[url] = value;\n        fs.writeFileSync(this._file, JSON.stringify(this._cache));\n    }\n\n    remove(url) {\n        this._init();\n        if (this._cache[url] !== undefined) {\n            delete this._cache[url];\n            fs.writeFileSync(this._file, JSON.stringify(this._cache));\n        }\n    }\n\n    _init() {\n        if (this._cache === undefined) {\n            try {\n                const f = fs.readFileSync(this._file);\n                this._cache = JSON.parse(f.toString());\n            } catch (err) {\n                this._cache = {};\n            }\n        }\n    }\n}\n"]}