{"version":3,"sources":["../src/web-cache.js"],"names":[],"mappings":";;;;;;;;AAAA;;;;;;;;;;;AAKI,oBAAY,IAAZ,EAAkB;AAAA;;AACd,aAAK,IAAL,GAAY,QAAQ,QAAQ,GAAR,CAAY,eAApB,IAAuC,QAAQ,GAAR,KAAgB,iBAAnE;AACH;;;;4BAEG,G,EAAK;AACL,iBAAK,KAAL;AACA,mBAAO,KAAK,KAAL,CAAW,GAAX,IAAkB,KAAK,KAAL,CAAW,GAAX,CAAlB,GAAoC,KAA3C;AACH;;;4BAEG,G,EAAK,I,EAAM;AACX,iBAAK,KAAL;AACA,iBAAK,KAAL,CAAW,GAAX,IAAkB,IAAlB;AACA,yBAAG,aAAH,CAAiB,KAAK,IAAtB,EAA4B,KAAK,SAAL,CAAe,KAAK,KAApB,CAA5B;AACH;;;gCAEO;AACJ,gBAAI,KAAK,KAAL,KAAe,SAAnB,EAA8B;AAC1B,oBAAI;AACA,wBAAM,IAAI,aAAG,YAAH,CAAgB,KAAK,IAArB,CAAV;AACA,yBAAK,KAAL,GAAa,KAAK,KAAL,CAAW,EAAE,QAAF,EAAX,CAAb;AACH,iBAHD,CAGE,OAAO,GAAP,EAAY;AACV,yBAAK,KAAL,GAAa,EAAb;AACH;AACJ;AAEJ","file":"web-cache.js","sourcesContent":["import fs from 'fs';\n\n// WebCache\nexport default class {\n\n    constructor(file) {\n        this.file = file || process.env.NODE_CONFIG_DIR || process.cwd() + '/web-cache.json';\n    }\n\n    get(url) {\n        this._init();\n        return this.cache[url] ? this.cache[url] : false;\n    }\n\n    set(url, html) {\n        this._init();\n        this.cache[url] = html;\n        fs.writeFileSync(this.file, JSON.stringify(this.cache));\n    }\n\n    _init() {\n        if (this.cache === undefined) {\n            try {\n                const f = fs.readFileSync(this.file);\n                this.cache = JSON.parse(f.toString());\n            } catch (err) {\n                this.cache = {};\n            }\n        }\n\n    }\n\n}\n"]}